---
- name: Execute curl command
  hosts: all
  connection: local
  gather_facts: false
  tasks:
    - name: Get machine IP address
      shell: hostname -I | awk '{print $1}'
      register: ip_address
      changed_when: false

    - name: Execute curl command
      shell: curl http://{{ ip_address.stdout }}
